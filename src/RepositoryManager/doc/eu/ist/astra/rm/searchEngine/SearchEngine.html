<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_10) on Thu Aug 13 12:10:27 CEST 2009 -->
<TITLE>
SearchEngine
</TITLE>

<META NAME="date" CONTENT="2009-08-13">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SearchEngine";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/SearchEngine.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?eu/ist/astra/rm/searchEngine/SearchEngine.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SearchEngine.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
eu.ist.astra.rm.searchEngine</FONT>
<BR>
Class SearchEngine</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>eu.ist.astra.rm.searchEngine.SearchEngine</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>SearchEngine</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class implements a search engine to perform queries about
 the applications in the repository.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>David Rozas</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;org.apache.lucene.store.RAMDirectory</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#indexDirectory">indexDirectory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;org.apache.lucene.index.IndexWriter</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#indexWriter">indexWriter</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#SearchEngine()">SearchEngine</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It creates a SearchEngine object, storing the index data in the
 given indexDirectory (in local memory - more efficient)</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#addSharedApplicationToIndex(eu.ist.astra.rm.impl.SharedApplication, java.lang.String[])">addSharedApplicationToIndex</A></B>(<A HREF="../../../../../eu/ist/astra/rm/impl/SharedApplication.html" title="class in eu.ist.astra.rm.impl">SharedApplication</A>&nbsp;app,
                            java.lang.String[]&nbsp;tags)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It adds a SharedApplication to the index</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#addTagToDocument(java.lang.String, java.lang.String, boolean)">addTagToDocument</A></B>(java.lang.String&nbsp;appId,
                 java.lang.String&nbsp;tag,
                 boolean&nbsp;verbose)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a new tag to the document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#deleteSharedApplicationFromIndex(java.lang.String)">deleteSharedApplicationFromIndex</A></B>(java.lang.String&nbsp;appId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It deletes an application from the index</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#documentToString(org.apache.lucene.document.Document)">documentToString</A></B>(org.apache.lucene.document.Document&nbsp;doc)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a printable version of the document in a string.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#filterResults(org.apache.lucene.search.Searcher, org.apache.lucene.search.TopDocs, java.lang.String)">filterResults</A></B>(org.apache.lucene.search.Searcher&nbsp;searcher,
              org.apache.lucene.search.TopDocs&nbsp;initialResults,
              java.lang.String&nbsp;userId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Filters the set of initial results, eliminating the applications that
 belong to that user and storing the application identifiers in filteredResults</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#removeTagFromDocument(java.lang.String, java.lang.String, boolean)">removeTagFromDocument</A></B>(java.lang.String&nbsp;appId,
                      java.lang.String&nbsp;tag,
                      boolean&nbsp;verbose)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove a tag from the document.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#replace(java.lang.String, java.lang.String, java.lang.String)">replace</A></B>(java.lang.String&nbsp;str,
        java.lang.String&nbsp;pattern,
        java.lang.String&nbsp;replace)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Replace the substring in the pattern by replace</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#search(java.lang.String, java.lang.String[], java.lang.String, boolean)">search</A></B>(java.lang.String&nbsp;q,
       java.lang.String[]&nbsp;fields,
       java.lang.String&nbsp;userId,
       boolean&nbsp;verbose)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It makes a search in different fields</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#search(java.lang.String, java.lang.String, java.lang.String, boolean)">search</A></B>(java.lang.String&nbsp;q,
       java.lang.String&nbsp;field,
       java.lang.String&nbsp;userId,
       boolean&nbsp;verbose)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It makes a search based on one of the fields</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngine.html#searchBySimilarity(java.lang.String, java.lang.String, java.lang.String[], boolean)">searchBySimilarity</A></B>(java.lang.String&nbsp;userId,
                   java.lang.String&nbsp;appDescription,
                   java.lang.String[]&nbsp;tags,
                   boolean&nbsp;verbose)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It performs a query to search for similar applications.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="indexDirectory"><!-- --></A><H3>
indexDirectory</H3>
<PRE>
private org.apache.lucene.store.RAMDirectory <B>indexDirectory</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="indexWriter"><!-- --></A><H3>
indexWriter</H3>
<PRE>
private org.apache.lucene.index.IndexWriter <B>indexWriter</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="SearchEngine()"><!-- --></A><H3>
SearchEngine</H3>
<PRE>
public <B>SearchEngine</B>()
             throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>It creates a SearchEngine object, storing the index data in the
 given indexDirectory (in local memory - more efficient)
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="addSharedApplicationToIndex(eu.ist.astra.rm.impl.SharedApplication, java.lang.String[])"><!-- --></A><H3>
addSharedApplicationToIndex</H3>
<PRE>
public void <B>addSharedApplicationToIndex</B>(<A HREF="../../../../../eu/ist/astra/rm/impl/SharedApplication.html" title="class in eu.ist.astra.rm.impl">SharedApplication</A>&nbsp;app,
                                        java.lang.String[]&nbsp;tags)
                                 throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>It adds a SharedApplication to the index
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>app</CODE> - Application to be added<DD><CODE>tags</CODE> - List of tags associated to that application
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="deleteSharedApplicationFromIndex(java.lang.String)"><!-- --></A><H3>
deleteSharedApplicationFromIndex</H3>
<PRE>
public void <B>deleteSharedApplicationFromIndex</B>(java.lang.String&nbsp;appId)
                                      throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>It deletes an application from the index
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>app</CODE> - Application to be deleted
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="search(java.lang.String, java.lang.String, java.lang.String, boolean)"><!-- --></A><H3>
search</H3>
<PRE>
public java.lang.String[] <B>search</B>(java.lang.String&nbsp;q,
                                 java.lang.String&nbsp;field,
                                 java.lang.String&nbsp;userId,
                                 boolean&nbsp;verbose)
                          throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>It makes a search based on one of the fields
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>q</CODE> - String with the query<DD><CODE>field</CODE> - String with the field to search for<DD><CODE>userId</CODE> - Identifier of the user who is performing the query to filter apps
                                        own by him<DD><CODE>verbose</CODE> - It shows the result also for the standard output (just for debugging)
<DT><B>Returns:</B><DD>Array with all the application identifiers (in standard ASTRA format) sorted by score, 
                        null if there were not results
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="search(java.lang.String, java.lang.String[], java.lang.String, boolean)"><!-- --></A><H3>
search</H3>
<PRE>
public java.lang.String[] <B>search</B>(java.lang.String&nbsp;q,
                                 java.lang.String[]&nbsp;fields,
                                 java.lang.String&nbsp;userId,
                                 boolean&nbsp;verbose)
                          throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>It makes a search in different fields
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>q</CODE> - String with the query<DD><CODE>fields</CODE> - String array with all the fields to search in<DD><CODE>verbose</CODE> - It shows the result also for the standard output (just for debugging)
<DT><B>Returns:</B><DD>Array with all the application identifiers (in standard ASTRA format) sorted by score, 
                        null if there were not results.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="filterResults(org.apache.lucene.search.Searcher, org.apache.lucene.search.TopDocs, java.lang.String)"><!-- --></A><H3>
filterResults</H3>
<PRE>
private java.lang.String[] <B>filterResults</B>(org.apache.lucene.search.Searcher&nbsp;searcher,
                                         org.apache.lucene.search.TopDocs&nbsp;initialResults,
                                         java.lang.String&nbsp;userId)
                                  throws org.apache.lucene.index.CorruptIndexException,
                                         java.io.IOException</PRE>
<DL>
<DD>Filters the set of initial results, eliminating the applications that
 belong to that user and storing the application identifiers in filteredResults
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>searcher</CODE> - Searcher, necessary to access the documents.<DD><CODE>initialResults</CODE> - Set of initial results<DD><CODE>userId</CODE> - Identifier of the user whose application will be filtered.
<DT><B>Returns:</B><DD>String array with the application identifiers after filtering process, 
                        null if there are not valid results.
<DT><B>Throws:</B>
<DD><CODE>org.apache.lucene.index.CorruptIndexException</CODE>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="searchBySimilarity(java.lang.String, java.lang.String, java.lang.String[], boolean)"><!-- --></A><H3>
searchBySimilarity</H3>
<PRE>
public java.lang.String[] <B>searchBySimilarity</B>(java.lang.String&nbsp;userId,
                                             java.lang.String&nbsp;appDescription,
                                             java.lang.String[]&nbsp;tags,
                                             boolean&nbsp;verbose)
                                      throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>It performs a query to search for similar applications.
 
 
 Internally, we will compose the query based on the application metadata, and we
 make use of the standard multifield search
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>userId</CODE> - User identifier<DD><CODE>appDescription</CODE> - Description of the compared application<DD><CODE>tags</CODE> - List of tags visible for this user.<DD><CODE>verbose</CODE> - It shows the results also for the standard output if it is true
<DT><B>Returns:</B><DD>Array with all the application identifiers (in standard ASTRA format) sorted by score, 
                        null if there were not results
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="addTagToDocument(java.lang.String, java.lang.String, boolean)"><!-- --></A><H3>
addTagToDocument</H3>
<PRE>
public void <B>addTagToDocument</B>(java.lang.String&nbsp;appId,
                             java.lang.String&nbsp;tag,
                             boolean&nbsp;verbose)
                      throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>Add a new tag to the document. Since in Lucene it is not possible to update
 the document, we need to:
        - Perform a query by appId
  - Recover all the information about that document
  - Delete it
  - Create it with the new information.
  
  If the event belongs to an application which has not been shared, the event is 
  listened but it is ignored (there are no actions with respect to it)
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>appId</CODE> - Application identifier in the standard ASTRA format<DD><CODE>tag</CODE> - Tag to be added<DD><CODE>verbose</CODE> - It shows the results also for the standard output
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeTagFromDocument(java.lang.String, java.lang.String, boolean)"><!-- --></A><H3>
removeTagFromDocument</H3>
<PRE>
public void <B>removeTagFromDocument</B>(java.lang.String&nbsp;appId,
                                  java.lang.String&nbsp;tag,
                                  boolean&nbsp;verbose)
                           throws <A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></PRE>
<DL>
<DD>Remove a tag from the document. Since in Lucene it is not possible to update
 the document, we need to:
        - Perform a query by appId
  - Recover all the information about that document
  - Delete it
  - Create it with the new information.
  
  If the event belongs to an application which has not been shared, the event is 
  listened but it is ignored (there are no actions with respect to it)
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>appId</CODE> - Application identifier in the standard ASTRA format<DD><CODE>tag</CODE> - Tag to be deleted<DD><CODE>verbose</CODE> - It shows the results also for the standard output
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine">SearchEngineException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="documentToString(org.apache.lucene.document.Document)"><!-- --></A><H3>
documentToString</H3>
<PRE>
private java.lang.String <B>documentToString</B>(org.apache.lucene.document.Document&nbsp;doc)</PRE>
<DL>
<DD>Returns a printable version of the document in a string.
 This should be used only in the verbose mode.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>doc</CODE> - Document
<DT><B>Returns:</B><DD>String in printable version</DL>
</DD>
</DL>
<HR>

<A NAME="replace(java.lang.String, java.lang.String, java.lang.String)"><!-- --></A><H3>
replace</H3>
<PRE>
private java.lang.String <B>replace</B>(java.lang.String&nbsp;str,
                                 java.lang.String&nbsp;pattern,
                                 java.lang.String&nbsp;replace)</PRE>
<DL>
<DD>Replace the substring in the pattern by replace
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>str</CODE> - String to be analyzed<DD><CODE>pattern</CODE> - Patter to search for<DD><CODE>replace</CODE> - Replacement
<DT><B>Returns:</B><DD>New string with the replacement</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/SearchEngine.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../eu/ist/astra/rm/searchEngine/SearchEngineException.html" title="class in eu.ist.astra.rm.searchEngine"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?eu/ist/astra/rm/searchEngine/SearchEngine.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SearchEngine.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
